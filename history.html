<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Son of Wisdom — Conversations</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="sow-shell">
  <header class="appbar">
    <button
      id="btn-close"
      class="icon-btn"
      aria-label="Back to chat"
      title="Back"
      type="button"
    >
      <span style="display:inline-block;font-size:22px;line-height:1;">×</span>
    </button>

    <div class="powered tiny">
      powered by <span class="brand-mini">Son of Wisdom</span>
    </div>

    <button id="btn-new" class="btn pill small" type="button">+ New Conversation</button>
  </header>

  <main class="content" role="main">
    <section class="hero-mini">
      <h1 class="hero-mini-title">Son of Wisdom</h1>
      <p class="hero-mini-tagline">An AI Coach for the Warrior Heart.</p>
    </section>

    <section aria-label="Conversations" style="max-width:980px;margin:0 auto;">
      <h2 class="tiny muted" style="letter-spacing:.08em;margin:12px 0 10px;">CONVERSATIONS</h2>

      <!-- History rows render here -->
      <div id="list" class="conv-list"></div>
    </section>
  </main>

  <!-- ✅ Template used by app/history.js
       IMPORTANT: keep this template exactly aligned with the selectors in history.js:
       .conv-item .title-text .title-edit .date .conv-actions .conv-kebab .conv-menu .conv-menu-item
  -->
  <template id="conv-item-template">
    <button class="conv-item" type="button" data-conv-id="">
      <div class="conv-main">
        <div class="title">
          <span class="title-text"></span>
          <input
            class="title-edit"
            type="text"
            aria-label="Rename conversation"
            spellcheck="false"
          />
        </div>
        <div class="date tiny muted"></div>
      </div>

      <!-- 3-dot actions -->
      <div class="conv-actions">
        <button
          class="conv-kebab"
          type="button"
          aria-label="Conversation options"
          aria-haspopup="menu"
          aria-expanded="false"
        >
          <span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span>
        </button>

        <div class="conv-menu" role="menu" aria-hidden="true">
          <button class="conv-menu-item" type="button" data-action="rename" role="menuitem">
            Rename
          </button>
          <button class="conv-menu-item danger" type="button" data-action="delete" role="menuitem">
            Delete
          </button>
        </div>
      </div>
    </button>
  </template>

  <script type="module" src="app/history.js"></script>
</body>
</html>
